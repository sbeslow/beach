<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>

<div id="graphContainer" style="min-width: 310px; max-width: 800px; height: 400px; margin: 0 auto"></div>
<style>
	#graphContainer {
		height: 100%;
		width: 100%
	}
</style>
<script>

var chart = new Highcharts.Chart({
        chart: {
            type: 'bar',
            renderTo: 'graphContainer',
        },
        yAxis: {
            min: 0,
            title: {
                text: '% of Open Hours'
            }
        },
        legend: {
            reversed: true
        },
        plotOptions: {
            series: {
                stacking: 'normal'
            }
        },
    });
    
$.getJSON('/api/scoreboard', function(data) {
	beachNames = [];
	bans = [];
	noRestrict = [];
	advisory = [];
    $.each(data, function(index, element) {
    	beachNames.push(element.name);
    	bans.push(element.ban);
    	noRestrict.push(element.noRestrict);
    	advisory.push(element.advisory);
    });
    chart.xAxis[0].setCategories(beachNames);
    chart.addSeries({
        name: "Swim Ban",
        data: bans
    });
    chart.addSeries({
        name: "Swim Advisory",
        data: advisory
    });
    chart.addSeries({
        name: "No Restrictions",
        data: noRestrict
    });
});

</script>